% =========================================================
% Exemples File
% =========================================================

\chapter{Exemplos}

% Seções e subseções ======================================

% Seção enumerada ------------------------------------------

\section{Seção de Exemplo} % <-- Título da seção
\label{sec:e1}

    Uma seção se parece com isso.

% Sub-seção enumerada -------------------------------------

\subsection{Subseção de Exemplo} % <-- Título da subseção
\label{sec:e2}

    Uma subseção se parece com isso.

% Seção NÃO enumerada -------------------------------------

\addcontentsline{toc}{section}{Seção Não Enumerada} % <-- Título da seção
\section*{Seção Não Enumerada} % <-- Título da seção

    Assim se parece uma seção não enumerada.
    Subseções e subsubseções também podem ser não enumeradas basta incluir o asterisco (*) no comando.
    As labels não funcionam bem em seções não enumeradas.

% Figuras =================================================

\section{Figuras}
\label{sec:figuras}

    A figura \ref{fig:e4} é um exemplo de imagem sozinha.
    A imagem pode ser referenciada com o comando \lstinline[language=TeX, style=Code]|\ref{}|.

% Figura solo ---------------------------------------------

    \begin{figure}[htb]
        \centering
        %\includegraphics[width=120pt]{images/figure.png}
        \includesvg[width=120pt]{images/figure.svg}
        \caption{Legenda.}
        \label{fig:e4}
    \end{figure}

    As imagens também podem ser utilizadas lado a lado, como é o caso das figuras \ref{fig:e5} e \ref{fig:e6}.
    Observe também que as figuras estão em formatos diferentes: a figura \ref{fig:e5} está em PNG, enquanto a figura \ref{fig:e6} está em PDF.
    Isso está assim para mostrar a perda de qualidade nos formatos não vetoriais.

% Figuras lado a lado -------------------------------------

    \begin{figure}[htb]
        \centering
        \begin{minipage}{7.5cm}
            \centering
            \includegraphics[width=120pt]{images/figure.png}
            \caption{Legenda figura PNG.}
            \label{fig:e5}
        \end{minipage}
        \hfill
        \begin{minipage}{7.5cm}
            \centering
            \includegraphics[width=120pt]{images/figure.pdf}
            \caption{Legenda figura PDF.}
            \label{fig:e6}
        \end{minipage}
    \end{figure}

    Caso esteja usando este template no Overleaf, também é fácil utilizar imagens em SVG com o comando \lstinline[language=TeX, style=Code]|\includesvg|.
    Porém, fora do Overleaf é um tanto trabalhoso e compensa converter o SVG em PDF.

    \begin{figure}[htb]
        \centering
        \begin{minipage}{7.5cm}
            \centering
            \includegraphics[width=120pt]{images/figure.pdf}
            \caption{Legenda figura ao lado do texto.}
            \label{fig:texto_do_lado}
        \end{minipage}
        \hfill
        \begin{minipage}{7.5cm}
            \linespread{1.5}\selectfont
            
            Caso o desejado seja apenas colocar texto lado a lado com figuras, uma solução possível é usar o ambiente \lstinline[language=TeX,style=code]|{minipage}{7.5cm}|.
            Nesse modo também é possível inverter onde vai o texto ou a figura, de acordo com qual aparece antes no código fonte.

        \end{minipage}
    \end{figure}

    As figuras também podem ser inclusas no formato de subfiguras, como na figura \ref{fig:subfiguras}.

    \begin{figure}
        \centering
        \begin{subfigure}[t]{0.3\textwidth}
            \centering
            \includegraphics[width=\textwidth]{images/figure.png}
            \caption{Figura em PNG}
            \label{subfig:png}
        \end{subfigure}
        \hfill
        \begin{subfigure}[t]{0.3\textwidth}
            \centering
            \includegraphics[width=\textwidth]{images/figure.pdf}
            \caption{Figura em PDF}
            \label{subfig:pdf}
        \end{subfigure}
        \hfill
        \begin{subfigure}[t]{0.3\textwidth}
            \centering
            %\includegraphics[width=\textwidth]{images/figure.pdf}
            \includesvg[width=\textwidth]{images/figure.svg}
            \caption{Figura SVG}
            \label{subfig:svg}
        \end{subfigure}
           \caption{Subfiguras.}
           \label{fig:subfiguras}
    \end{figure}

% Tabelas =================================================

\section{Tabelas}
\label{sec:tabelas}

    A inserção de tabelas é feita pelo ambiente \lstinline[language=TeX, style=Code]|tabular|, no entanto para obter resultados melhores ele é inserido dentro de outro ambiente, o \lstinline[language=TeX, style=Code]|table|.
    A tabela \ref{tab:e7} é um exemplo.

% Tabela --------------------------------------------------

\begin{table}[htb]
    \centering\footnotesize
    \caption{Exemplo de tabela}
    \label{tab:e7}
    \begin{tabularx}{0.8\textwidth}{
    >{\hsize=\hsize}L|
    >{\hsize=\hsize}C
    >{\hsize=\hsize}C
    >{\hsize=\hsize}C
    }
        \hline
        \multirow{2}{*}{\textbf{Gêneros}} & \multicolumn{3}{c}{\textbf{Esportes}} \\ \cline{2-4} 
                                          & Futebol    & Handebol    & Natação    \\ \hline
        Masculino                         & 20         & 7           & 4          \\
        Feminino                          & 4          & 10          & 8          \\ \hline
        Maioria                           & 83,33\%    & 58,82\%     & 66,67\%    \\ \hline
    \end{tabularx}
\end{table}

    Geralmente, trabalhar com tabelas diretamente no \LaTeX pode ser complicado e confuso.
    Para facilitar isso pode-se utilizar o site \href{https://www.tablesgenerator.com}{Tables Generator}, onde é possível criar tabelas de forma mais intuitiva, ou copiar tabelas com \textit{Ctrl C - Ctrl V} de softwares como Excel.

% Códigos =================================================

\section{Código Fonte}
\label{sec:codigo}

    É possível incluir código fonte tanto no próprio texto com o comando \lstinline[language=TeX,style=Code]|\lstinline[]|, ou como bloco para trechos extensos com o ambiente \lstinline[language=TeX,style=Code]|lstlisting|.

% Bloco de código -----------------------------------------

    \begin{lstlisting}[language=Python,
        style=Code,
        caption={Método Jacobi em Python.},
        label={lst:jacobi},
        name=jacobi]
import numpy as np

A = np.array([[10, 2, 1], [1, 5, 1], [2, 3, 10]], dtype=float)
B = np.array([7, -8, 6], dtype=A.dtype)
guess = np.array([0.7, -1.6, 0.6], dtype=A.dtype)

def jacobi(A,b,N=25,x=None):
    # Create an initial guess if needed                                                                                                                                                            
    if x is None:
        x = np.zeros(len(A[0]))

    # Create a vector of the diagonal elements of A                                                                                                                                                
    # and subtract them from A                                                                                                                                                                     
    D = np.diag(A)
    R = A - np.diagflat(D)

    # Iterate for N times                                                                                                                                                                          
    for i in range(N):
        x = (b - np.dot(R,x)) / D
    return x
    \end{lstlisting}

    No geral o que esses comando e ambiente fazem é simplesmente não compilar o que é inserido neles.
    As opções de linguagem e estilo são opcionais, no entanto facilitam a legibilidade.

% Formatação de texto =====================================

\section{Formatação de Texto}
\label{sec:formatacao}

    \begin{itemize}
        \item \textbf{Negrito} -- \lstinline[language=TeX,style=code]|\textbf{}|
        \item \textit{Itálico} -- \lstinline[language=TeX,style=code]|\textit{}|
        \item \underline{Sublinhado} -- \lstinline[language=TeX,style=code]|\underline{}|
    \end{itemize}

% Listas ==================================================

\section{Listas}
\label{sec:listas}

    Listas no \LaTeX\ podem ser enumeradas, ou itemizadas:

% Lista enumerada -----------------------------------------

    \begin{enumerate}
        \item Primeiro item
        \item Segundo item
    \end{enumerate}

% Lista itemizada -----------------------------------------

    \begin{itemize}
        \item Primeiro item
        \item Segundo item
    \end{itemize}

% Citações ================================================

\section{Citações}

    As referências bibbliográficas devem ser inclusas no arquivo \textit{bibliography.bib}.
    as citações, a partir das referencias inclusas, podem ser feitas de diversas formas.

% Tipos de citação ----------------------------------------

    \begin{itemize}
        \item Com Autores e ano em parêntesis -- \cite{wortmann2015internet}
        \item Apenas autores entre parêntesis -- \citeauthor{ashton2009internet}
    \end{itemize}

    Apenas os dois primeiros funcionam no formator de citações numéricas.

    Caso a citação seja direta e ocupe mais que três linhas ela deve estar em um bloco com formatação diferente.
    Para gerar esse bloco, neste template, utilize o ambiente \lstinline[language=TeX,style=code]|displayquote|, como mostrado a seguir.

% Citação direta ------------------------------------------

    \begin{displayquote}[\cite{weber2010internet}][.]
    Extending the initial application scope, the IoT might also serve as backbone for
    ubiquitous computing, enabling smart environments to recognize and identify
     objects, and retrieve information from the Internet to facilitate their adaptive
    functionality
    \end{displayquote}

% Multicolunas ============================================

\section{Multicolunas}
\label{sec:multicolunas}

% Multicolunas para texto ---------------------------------

    \begin{multicols}{2}
        O ambiente \lstinline[language=TeX,style=code]|{multicols}{2}| gera multiplas colunas no documento.
        O segundo parâmetro é o número de colunas geradas.

        O texto é justificado automaticamente.
        No entanto, elementos flutuantes como figuras e tabelas não podem ser inclusos no ambiente normalmente.

        A forma recomendada aqui é interromper o ambiente de duas colunas, adicionar a figura ou tabela, e retomar a divisão de colunas novamente, assim como é feito para a figura \ref{fig:coluna_dupla}.
    \end{multicols}

% Figura (que ignora as colunas) --------------------------

    \begin{figure}[htb]
        \centering
        \includegraphics[width=120pt]{images/figure.pdf}
        \caption{Legenda figura PNG.}
        \label{fig:coluna_dupla}
    \end{figure}
        
    \begin{multicols}{2}
        \lipsum[1][1-10]
    \end{multicols}

% Expressões Matemáticas ==================================

\section{Expressões Matemáticas}
\label{sec:exmatematicas}

    Expressões matemáticas podem ser inclusas de três formas:
    no texto; em destaque sem índice; ou em destaque com índice.

% Expressões no texto -------------------------------------

    Para incluir as expressões no texto basta delimitá-las com sifrão (\$).
    \lstinline[language=TeX,style=code]|$x = 2$| produz $x = 2$.
    Em alguns casos porém, quando a expressão é naturalmente alta ela será comprimida, como frações por exemplo $\frac{3}{7}$.

% Destaque - sem índice -----------------------------------

    Para gerar expressões destacadas, porém sem índice, elas devem ser delimitadas por sifrões duplos (\$\$).
    Nesse caso, \lstinline[language=teX,style=code]|$$\frac{1}{2} = 0,5$$| produz:
    $$\frac{1}{2} = 0,5$$

    Ou ainda, utilizando o ambiente \lstinline[language=TeX,style=code]|equation*| com asteriscos:
    
    \begin{equation*}
        A^{2} + B^{2} = C^{2}
    \end{equation*}

% Destaque - com índice -----------------------------------

    Expressões matemáticas com índice utilizam o ambiente \lstinline[language=TeX,style=code]|equation|.
    E permite que as expressões sejam referenciadas no texto, como é o caso da equação \ref{eq:baskara}.

    \begin{equation}
        x = \frac{-b \pm \sqrt{b^2 - 4ac}}{2a}
        \label{eq:baskara}
    \end{equation}

% Números e Unidades ======================================

\section{Números e Unidades}
\label{sec:numerosunidades}

    Apesar de o números poderem ser adicionados apenas como texto comum, para alguns casos o uso de comandos pode facilitar a digitação.

    \begin{itemize}
        \item Números: \lstinline[language=teX,style=code]|\num{32.3}| -- \num{32.3}
        \item Ângulos: \lstinline[language=teX,style=code]|\ang{90}| -- \ang{90}
        \item Intervalo: \lstinline[language=teX,style=code]|\numrange{1.0}{3.9}| -- \numrange{1.0}{3.9}
        \item Multiplicação de números: \lstinline[language=teX,style=code]|\numproduct{5;10;2;9.4}| -- \numproduct{5 x 10 x 2 x 9.4}
        \item Lista de números: \lstinline[language=teX,style=code]|\numlist{1;2;3;5;7;11}| -- \numlist{1;2;3;5;7;11}
        \item Unidade: \lstinline[language=teX,style=code]|\unit{\newton\per\square\meter}| -- \unit{\newton\per\square\meter}
        \item Unidade (abreviado): \lstinline[language=teX,style=code]|\unit{\N/\m^2}| -- \unit{\N/\m^2}
        \item Quantidade (número e unidade): \lstinline[language=teX,style=code]|\qty{12}{\volt}| -- \qty{12}{\volt}
        \item Intervalo de quantidade: \lstinline[language=teX,style=code]|\qtyrange{110}{240}{\volt}| -- \qtyrange{110}{240}{\volt}
        \item Multiplicação de quantidades: \lstinline[language=teX,style=code]|\qtyproduct{5.0 x 8.5}{\meter}| -- \qtyproduct{5.0 x 8.5}{\meter}
        \item Lista de quantidades: \lstinline[language=teX,style=code]|\qtylist{100;240;360}{\ohm}| -- \qtylist{100;240;360}{\ohm}
        \item Números complexos: \lstinline[language=teX,style=code]|\complexnum{10+i5}| -- \complexnum{10+i5}
        \item Números complexos polares: \lstinline[language=teX,style=code]|\complexnum{127:-30}| -- \complexnum{127:-30}
        \item Quantidade complexa: \lstinline[language=teX,style=code]|\complexqty{15-i36}{\mili\ohm}| -- \complexqty{15-i36}{\milli\ohm}
    \end{itemize}

% Circuitos Elétricos =====================================

\section{Circuitos Elétricos}
\label{sec:circuitos}

    É possível adicionar circuitos elétricos a partir de comandos no próprio \LaTeX, com o pacote \texttt{circuitikz}, como mostrado na figura \ref{fig:circuito}.

    \begin{figure}[htb]
        \centering
        \resizebox{0.8\textwidth}{!}{
        \begin{circuitikz}[scale=1] \draw
            (0,3) to[short, o-] (1,3)
            (1,3) to[L, l=$L$] (3,3)
            (3,3) to[R, l=$R_2$] (5,3)
            (5,3) to[short, -o] (8,3)
            (5,3) to[R, l=$R_1$] (5,0)
            (7,3) to[C, l=$C$] (7,0)
            (8,0) to[short, o-o, f>_=$i(t)$] (0,0)
            (0,0) to [open, v^=$u(t)$] (0,3)
            (8,0) to [open, v=$y(t)$] (8,3)
            ;
        \end{circuitikz}
        }
        \caption{Circuito}
        \label{fig:circuito}
    \end{figure}

% Diagrama de blocos ======================================

\section{Diagrama de Blocos}
\label{sec:diagrama_blocos}

    O pacote TiKz permite criar diagrama de blocos, de forma que esses podem ser utilizados para representar sistemas de controle.
    As figuras \ref{fig:blocos_exemplo}, \ref{fig:blocos_exemplo1}, \ref{fig:blocos_exemplo2}, e \ref{fig:blocos_exemplo3} apresentam alguns exemplos.

    \begin{figure}[H]
        \centering
        \begin{tikzpicture}[auto, node distance=20mm,>=latex']
            % Elementos linha principal
            \node[input] (input) {};
            \node[sum={+}{-}{}{}, right of=input] (sum) {};
            \node[block, right of=sum] (system) {$G(s)$};
            \node[output, right of=system] (output) {};
            % Conexões linha principal
            \draw[->] (input) -- node[name=R]{$R(s)$} (sum);
            \draw[->] (sum) -- node[name=E]{} (system);
            \draw[->] (system) -- node[name=C]{$C(s)$} (output);
            % Realimentação
            \node[block, below of=system] (sensor) {$H(s)$};
            \draw[->] (C) |- (sensor);
            \draw[->] (sensor) -| node[near end,name=B]{} (sum);

        \end{tikzpicture}
        \caption{Diagrama de blocos -- Exemplo básico}
        \label{fig:blocos_exemplo}
    \end{figure}

    \begin{figure}[H]
        \centering
        \begin{tikzpicture}[auto, node distance=2cm,>=latex']
            % Elementos linha principal
            \node[input] (input) {};
            \node[sum={+}{-}{}{}, right of=input] (sum) {};
            \node[block, right of=sum] (controller) {$G_c(s)$};
            \node[block, right of=controller, node distance=25mm] (system) {$G_p(s)$};
            \node[output, right of=system] (output) {};
            % Conexões linha principal
            \draw[->] (input) -- node[name=R]{$R(s)$} (sum);
            \draw[->] (sum) -- node[name=E]{$E(s)$} (controller);
            \draw[->] (controller) -- node[name=U] {$U(s)$} (system);
            \draw[->] (system) -- node[name=C]{$C(s)$} (output);
            % Realimentação
            \node[block, below of=U] (sensor) {$H(s)$};
            \draw[->] (C) |- (sensor);
            \draw[->] (sensor) -| node[near end,name=B]{$B(s)$} (sum);

        \end{tikzpicture}
        \caption{Diagrama de blocos -- Exemplo com realimentação}
        \label{fig:blocos_exemplo1}
    \end{figure}

    \begin{figure}[H]
        \centering
        \begin{tikzpicture}[auto, node distance=2cm,>=latex']
            % Elementos linha principal
            \node[input] (input) {};
            \node[sum={+}{-}{}{}, right of=input] (sum) {};
            \node[block, right of=sum] (controller) {$\frac{1}{s}$};
            \node[sum={+}{}{}{+}, right of=controller, node distance=15mm] (sumP) {};
            \node[block, right of=sumP] (system) {$\frac{1}{s+1}$};
            \node[output, right of=system] (output) {};
            % Conexões linha principal
            \draw[->] (input) -- node[name=R]{$R(s)$} (sum);
            \draw[->] (sum) -- node[name=E]{$E(s)$} (controller);
            \draw[->] (controller) -- node[name=U] {} (sumP);
            \draw[->] (sumP) -- node[name=UP] {} (system);
            \draw[->] (system) -- node[name=C]{$C(s)$} (output);
            % Realimentação
            \node[block, below of=sumP] (sensor) {$\frac{1}{s+4}$};
            \draw[->] (C) |- (sensor);
            \draw[->] (sensor) -| node[near end,name=B]{$B(s)$} (sum);
            % Pertubação
            \node[input, above of=sumP] (inputP) {};
            \draw[->] (inputP) -- node[near start, name=P]{$P(s)$} (sumP);
        \end{tikzpicture}
        \caption{Diagrama de blocos -- Exemplo com perturbação}
        \label{fig:blocos_exemplo2}
    \end{figure}

    \begin{figure}[H]
        \centering
        \begin{tikzpicture}[auto, node distance=2cm,>=latex']
            % We start by placing the blocks
            \node [input] (input) {};
            \node [sum={+}{-}{}{}, right of=input] (sum) {};
            \node [block, right of=sum] (controller) {$G_c(s)$};
            \node [block, right of=controller,
                    node distance=3cm] (system) {$\frac{1}{s^2+1s+9}$};
            % We draw an edge between the controller and system block to 
            % calculate the coordinate u. We need it to place the measurement block. 
            \draw [draw,->] (controller) -- node[name=u] {$U$} (system);
            \node [sum={+}{}{}{+}, right of=system, node distance=2cm] (disturbance) {};
            \node [block, above of=disturbance] (g_d) {$G_d(s)$};
            \node [input, left of=g_d] (dist_input){$D$};
            \node [output, right of=disturbance] (output) {};
            \node [block, below of=u] (measurements) {$G_m(s)$};
        
            % Once the nodes are placed, connecting them is easy. 
            \draw [->] (input) -- node {$R(s)$} (sum);
            \draw [->] (sum) -- node {$E$} (controller);
            \draw [->] (system) -- node {$Y_u$} (disturbance);
            \draw [->] (disturbance) -- node [name=y] {$Y$}(output);
            \draw [->] (g_d) -- node {$Y_d$} (disturbance);
            \draw [->] (dist_input) -- node {$D$} (g_d);
            \draw [->] (y) |- (measurements);
            \draw [->] (measurements) -| node [near end] {$Y_m$} (sum);
        \end{tikzpicture}
        \caption{Diagrama de blocos -- Exemplo sistema complexo}
        \label{fig:blocos_exemplo3}
    \end{figure}
